## Oracle PPAS 兼容性分析 之  DBMS_APPLICATION_INFO包（如：READ_CLIENT_INFO 方法）
---

### 一、背景介绍
DBMS_APPLICATION_INFO 应用开发包允许应用程序向视图v$session,v$sqlarea,v$session_longops添加统计信息用于追踪程序执行情况，定位特定module的性能问题。涉及的 $ORACLE_HOME/rdbms/admin/dbmsapin.sql 脚本在数据库安装时就被安装上了。包含的主要子程序：

+ **READ_CLIENT_INFO 存储过程**： 读取当前 session 的 client_info 字段的值。
```
DBMS_APPLICATION_INFO.READ_CLIENT_INFO (
   client_info OUT VARCHAR2); 
```
+ **READ_MODULE 存储过程**：读取当前 session 的 module 和 action 字段值。
```
DBMS_APPLICATION_INFO.READ_MODULE ( 
   module_name OUT VARCHAR2, 
   action_name OUT VARCHAR2); 
```
+ **SET_ACTION 存储过程**：设置当前 module 的当前 action 名称。
```
DBMS_APPLICATION_INFO.SET_ACTION (
   action_name IN VARCHAR2); 
```
+ **SET_CLIENT_INFO 存储过程**：在 V$SESSION 设置 client_info 字段。
```
DBMS_APPLICATION_INFO.SET_CLIENT_INFO (
   client_info IN VARCHAR2); 
```
+ **SET_MODULE 存储过程**：当前运行 module 名称。
```
DBMS_APPLICATION_INFO.SET_MODULE ( 
   module_name IN VARCHAR2, 
   action_name IN VARCHAR2); 
```
+ **SET_SESSION_LONGOPS 存储过程**：在 V$SESSION_LONGOPS 表中设置一行。
```
DBMS_APPLICATION_INFO.SET_SESSION_LONGOPS (
   rindex      IN OUT BINARY_INTEGER,
   slno        IN OUT BINARY_INTEGER,
   op_name     IN     VARCHAR2       DEFAULT NULL,
   target      IN     BINARY_INTEGER DEFAULT 0,
   context     IN     BINARY_INTEGER DEFAULT 0,
   sofar       IN     NUMBER         DEFAULT 0,
   totalwork   IN     NUMBER         DEFAULT 0,
   target_desc IN     VARCHAR2       DEFAULT 'unknown target',
   units       IN     VARCHAR2       DEFAULT NULL)  

set_session_longops_nohint constant BINARY_INTEGER := -1;
```

### 二、转换规则

### 三、参考链接
1.[http://www.dba86.com/docs/oracle/11.2/appdev.112/e40758/d_appinf.htm#ARPLS003](http://www.dba86.com/docs/oracle/11.2/appdev.112/e40758/d_appinf.htm#ARPLS003)
